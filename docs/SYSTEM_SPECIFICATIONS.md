# 시스템 사양 및 운영 규칙
**QR + GPS 기반 금형관리시스템 Ver.09**

---

## 📋 목차
1. [금형 상태 코드](#금형-상태-코드)
2. [긴급도 기준](#긴급도-기준)
3. [점검 주기 및 기준](#점검-주기-및-기준)
4. [알림 시스템](#알림-시스템)
5. [GPS 위치 정확도](#gps-위치-정확도)
6. [QR 세션 관리](#qr-세션-관리)
7. [데이터 백업 정책](#데이터-백업-정책)
8. [성과 평가 기준](#성과-평가-기준)

---

## 금형 상태 코드

### 상태 코드 정의

| 코드 | 상태명 | 설명 | 색상 표시 |
|------|--------|------|-----------|
| `in_use` | 사용중 | 정상 생산 중 | 🟢 녹색 |
| `maintenance` | 점검중 | 정기/일상 점검 진행 중 | 🟡 노란색 |
| `urgent_repair` | 긴급수리 | 생산 중단, 긴급 수리 필요 | 🔴 빨간색 |
| `repair_needed` | 수리필요 | 수리 계획 수립 필요 | 🟠 주황색 |
| `transfer_out` | 반출중 | 협력사로 이동 중 | 🔵 파란색 |
| `transfer_in` | 입고중 | 본사로 복귀 중 | 🔵 파란색 |
| `idle` | 대기중 | 보관 상태 | ⚪ 회색 |
| `new` | 신규 | 신규 등록 금형 | 🟣 보라색 |
| `end_of_life` | 수명종료 | 교체 검토 필요 | ⚫ 검은색 |

### 상태 전환 규칙

```
신규 (new)
  ↓
사용중 (in_use) ←→ 점검중 (maintenance)
  ↓                    ↓
수리필요 (repair_needed) → 긴급수리 (urgent_repair)
  ↓                    ↓
반출중 (transfer_out) → 입고중 (transfer_in)
  ↓
사용중 (in_use) / 대기중 (idle)
  ↓
수명종료 (end_of_life)
```

### 관리 기준

**사용중 (in_use)**
- 일일 점검 필수
- 타수 기록 필수
- 이상 발견 시 즉시 보고

**점검중 (maintenance)**
- 점검 완료 시 상태 자동 변경
- 점검 결과에 따라 수리필요/사용중 전환

**긴급수리 (urgent_repair)**
- 4시간 이내 대응 필수
- 생산 중단 알림 발송
- 우선순위 최상위

**수리필요 (repair_needed)**
- 수리 계획 수립
- 협력사 배정
- 예상 수리 기간 입력

**반출중/입고중**
- GPS 위치 추적
- 체크리스트 작성 필수
- 승인 워크플로우 진행

**대기중 (idle)**
- 월 1회 보관 상태 점검
- 방청유 도포 확인

**수명종료 (end_of_life)**
- 교체 계획 수립
- 최종 이력 정리
- 폐기 절차 진행

---

## 긴급도 기준

### 긴급도 레벨

| 긴급도 | 영문 | 대응시간 | 설명 | 우선순위 | 알림 |
|--------|------|----------|------|----------|------|
| 긴급 | Urgent | 4시간 이내 | 생산 중단 상황 | 🔴 최상 | 즉시 |
| 높음 | High | 24시간 이내 | 생산 지장 우려 | 🟠 상 | 즉시 |
| 보통 | Medium | 3일 이내 | 계획 수리 가능 | 🟡 중 | 1시간 |
| 낮음 | Low | 7일 이내 | 예방 정비 | 🟢 하 | 일일 |

### 긴급도별 처리 절차

#### 긴급 (Urgent)
1. **즉시 알림 발송**
   - 관리자 SMS/푸시 알림
   - 협력사 긴급 연락
   - 대시보드 상단 고정

2. **4시간 이내 대응**
   - 협력사 즉시 배정
   - 현장 출동
   - 임시 조치 실시

3. **진행 상황 보고**
   - 1시간마다 상태 업데이트
   - 관리자 실시간 모니터링

#### 높음 (High)
1. **즉시 알림 발송**
   - 관리자 알림
   - 협력사 통보

2. **24시간 이내 대응**
   - 협력사 배정
   - 수리 계획 수립
   - 예상 완료 시간 입력

3. **일일 진행 보고**
   - 작업 진행 상황 업데이트

#### 보통 (Medium)
1. **1시간 내 알림 발송**
   - 관리자 알림

2. **3일 이내 대응**
   - 수리 일정 조율
   - 협력사 배정

3. **주간 진행 보고**

#### 낮음 (Low)
1. **일일 집계 알림**
   - 일일 보고서에 포함

2. **7일 이내 대응**
   - 예방 정비 계획 수립

---

## 점검 주기 및 기준

### 점검 유형별 주기

| 점검 유형 | 주기 | 담당 | 소요시간 | 필수 항목 |
|-----------|------|------|----------|-----------|
| 일상점검 | 매일 | 작업자 | 10-15분 | 외관, 기능부, 생산 관련, 보관관리 |
| 1차 정기점검 | 100,000타 | 협력사/전문인력 | 2-3시간 | 금형 외관, 냉각라인, 게이트 |
| 2차 정기점검 | 500,000타 | 협력사/전문인력 | 4-6시간 | 캐비티/코어, 마모, 슬라이드, 에젝터 |
| 3차 정기점검 | 1,000,000타 | 협력사/전문인력 | 1-2일 | 전체 분해 점검, 주요 부품 교체 판단 |
| 습합점검 | 필요시 | 협력사 | 1-2시간 | 파팅라인, 코어/캐비티 밀착, 게이트 |
| 세척점검 | 월 1회 | 협력사/작업자 | 30분-1시간 | 금형 세척, 방청유 도포 |

### 일상점검 상세 항목

#### 1. 금형 외관
- [ ] 금형 외관 점검 (양호/불량)
- [ ] 방청유 도포상태
- [ ] 변호판/QR 상태
- [ ] 사진 촬영 필수

#### 2. 금형 기능부
- [ ] 게이트 상태
- [ ] 냉각라인 상태 (누수 확인)
- [ ] 에젝터 작동 확인
- [ ] 슬라이드/리프터 작동
- [ ] 사진 촬영 필수

#### 3. 생산 관련
- [ ] 금형온도 입력 (℃)
- [ ] 금형운행상태
- [ ] 이형제 잔량/상태

#### 4. 보관관리
- [ ] 보관위치 (GPS 자동검증)
- [ ] 금형보관상태
- [ ] 사진 촬영 필수

#### 5. 이상조치
- [ ] 이상내용 (텍스트 + 사진)
- [ ] 조치내용 (텍스트)

### 정기점검 상세 항목

#### 1차 정기점검 (100,000타)
**점검 항목:**
1. 금형 외관 상태
2. 냉각라인 점검
   - 냉각수 흐름 확인
   - 누수 여부
   - 냉각 효율
3. 게이트 확인
   - 게이트 마모 상태
   - 게이트 크기 측정

**판정 기준:**
- 양호: 다음 점검까지 정상 사용
- 정비요: 경미한 정비 필요
- 수리요: 즉시 수리 필요

#### 2차 정기점검 (500,000타)
**점검 항목:**
1. 캐비티/코어 상태
   - 표면 마모
   - 크랙 발생 여부
   - 치수 측정
2. 마모 점검
   - 파팅라인 마모
   - 슬라이드 마모
3. 슬라이드/리프터
   - 작동 상태
   - 간극 측정
4. 에젝터 핀
   - 핀 마모 상태
   - 작동 확인

**판정 기준:**
- 양호: 다음 점검까지 정상 사용
- 정비요: 부품 교체 또는 보수
- 수리요: 전면 수리 필요

#### 3차 정기점검 (1,000,000타)
**점검 항목:**
1. 전체 분해 점검
2. 주요 부품 상태 확인
3. 캐비티/코어 정밀 측정
4. 냉각라인 세척
5. 유압라인 점검
6. 가이드핀/부싱 교체 검토
7. 볼트/패킹류 전수 점검
8. 센서류 점검

**판정 기준:**
- 양호: 계속 사용 가능
- 정비요: 주요 부품 교체
- 수리요: 전면 수리 또는 교체 검토

### 점검 결과 처리

**양호 (Pass)**
- 다음 점검일 자동 설정
- 금형 상태 "사용중"으로 변경

**정비요 (Maintenance Required)**
- 정비 계획 수립
- 부품 발주
- 정비 일정 등록

**수리요 (Repair Required)**
- 즉시 수리 요청 생성
- 협력사 배정
- 금형 상태 "수리필요"로 변경

---

## 알림 시스템

### 알림 유형 및 발송 기준

| 알림 유형 | 발송 조건 | 수신 대상 | 발송 방법 | 우선순위 |
|-----------|-----------|-----------|-----------|----------|
| 점검 예정 | 점검일 7일 전 | 담당자 | 푸시/이메일 | 보통 |
| 점검 미실시 | 당일 미점검 | 담당자, 관리자 | 푸시/SMS | 높음 |
| 타수 임계치 | 최대 타수 90% 도달 | 담당자, 관리자 | 푸시/이메일 | 높음 |
| 정기점검 도달 | 점검 타수 도달 | 담당자, 협력사 | 푸시/이메일 | 높음 |
| 긴급 수리 | 긴급 수리 요청 | 관리자, 협력사 | 푸시/SMS | 긴급 |
| 수리 완료 | 수리 작업 완료 | 요청자, 관리자 | 푸시/이메일 | 보통 |
| 위치 이탈 | GPS 위치 이탈 | 관리자 | 푸시/SMS | 높음 |
| 상태 변경 | 금형 상태 변경 | 담당자 | 푸시 | 보통 |
| 승인 요청 | 이관/수리 승인 필요 | 승인자 | 푸시/이메일 | 높음 |

### 알림 발송 규칙

#### 긴급 알림 (즉시 발송)
- 긴급 수리 요청
- 위치 이탈
- 점검 미실시 (당일)

**발송 방법:**
- 푸시 알림
- SMS
- 이메일
- 대시보드 팝업

#### 높음 알림 (즉시 발송)
- 타수 임계치 도달
- 정기점검 도달
- 승인 요청

**발송 방법:**
- 푸시 알림
- 이메일

#### 보통 알림 (1시간 단위 집계)
- 점검 예정
- 수리 완료
- 상태 변경

**발송 방법:**
- 푸시 알림
- 이메일 (일일 요약)

### 알림 설정

**관리자 설정 항목:**
- 알림 수신 여부
- 알림 유형별 수신 설정
- 알림 발송 시간대
- 알림 수신 방법 (푸시/이메일/SMS)
- 긴급 알림 수신자 지정

**사용자 설정 항목:**
- 푸시 알림 수신 여부
- 이메일 알림 수신 여부
- 알림 수신 시간대

---

## GPS 위치 정확도

### GPS 정확도 기준

| 항목 | 기준 | 설명 |
|------|------|------|
| 위치 오차 | 50m 이내 | 허용 오차 범위 |
| 측정 주기 | 작업 시작/종료 시 | 자동 기록 |
| 위치 검증 | 지정 위치 기준 | 이탈 시 알림 |

### GPS 기록 시점

1. **일상점검**
   - 점검 시작 시
   - 점검 완료 시

2. **수리 작업**
   - 수리 시작 시
   - 수리 완료 시

3. **이관 작업**
   - 반출 시작 시
   - 이동 중 (1시간마다)
   - 입고 완료 시

4. **습합/세척**
   - 작업 시작 시
   - 작업 완료 시

### GPS 위치 이탈 처리

**이탈 기준:**
- 지정 위치에서 50m 이상 이탈

**처리 절차:**
1. 즉시 알림 발송 (관리자)
2. 사용자에게 위치 확인 요청
3. 위치 이탈 사유 입력 요구
4. 관리자 승인 후 작업 계속

---

## QR 세션 관리

### QR 세션 규칙

| 항목 | 설정값 | 설명 |
|------|--------|------|
| 세션 유효시간 | 8시간 | 작업 시간 기준 |
| 재로그인 | 세션 만료 시 | ID/PW 재입력 |
| 동시 세션 | 1개 | 중복 로그인 불가 |
| 세션 갱신 | 작업 시마다 | 자동 갱신 |

### QR 접근 프로세스

1. **QR 스캔**
   - 카메라 권한 확인
   - QR 코드 인식
   - 금형 정보 로드

2. **로그인**
   - ID/PW 입력
   - 권한 검증
   - 세션 생성

3. **작업 수행**
   - 금형 정보 확인
   - 작업 유형 선택
   - 작업 수행

4. **세션 종료**
   - 자동 로그아웃 (8시간 후)
   - 수동 로그아웃
   - 세션 기록 저장

### 필수 권한

- **카메라**: QR 코드 스캔
- **GPS**: 위치 기록
- **저장소**: 사진 촬영 및 저장

---

## 데이터 백업 정책

### 백업 주기

| 백업 유형 | 주기 | 보관 기간 | 저장 위치 |
|-----------|------|-----------|-----------|
| 일일 백업 | 매일 자정 | 7일 | Railway 자동 백업 |
| 주간 백업 | 매주 일요일 | 4주 | Railway + 외부 스토리지 |
| 월간 백업 | 매월 1일 | 12개월 | 외부 스토리지 |
| 연간 백업 | 매년 1월 1일 | 영구 | 외부 스토리지 |

### 백업 데이터

**필수 백업:**
- 금형 정보 (molds)
- 사용자 정보 (users)
- 점검 이력 (daily_checks, inspections)
- 수리 이력 (repairs)
- 타수 기록 (shots)

**선택 백업:**
- 이미지 파일 (주간/월간)
- 도면 파일 (월간)
- 로그 데이터 (월간)

### 복구 절차

1. **긴급 복구** (4시간 이내)
   - 최근 일일 백업 사용
   - 핵심 데이터 우선 복구

2. **전체 복구** (24시간 이내)
   - 주간/월간 백업 사용
   - 전체 시스템 복구

---

## 성과 평가 기준

### 협력사 평가 항목

| 평가 항목 | 가중치 | 평가 기준 | 목표 |
|-----------|--------|-----------|------|
| 수리 품질 | 40% | 재수리율, 품질 검사 결과 | 재수리율 5% 이하 |
| 납기 준수율 | 30% | 약속 기한 내 완료율 | 95% 이상 |
| 대응 시간 | 20% | 요청 후 착수까지 시간 | 긴급 4시간, 높음 24시간 |
| 의사소통 | 10% | 진행 상황 보고, 협조도 | 일일 보고 |

### 점검률 계산

```
점검률 = (실시한 점검 수 / 예정된 점검 수) × 100%
```

**목표 점검률:**
- 일상점검: 95% 이상
- 정기점검: 100%

### KPI 목표

| KPI | 목표값 | 측정 주기 |
|-----|--------|-----------|
| 전체 점검률 | 90% 이상 | 주간 |
| 긴급 수리 대응률 | 100% (4시간 이내) | 실시간 |
| 타수 기록률 | 95% 이상 | 일일 |
| GPS 위치 기록률 | 100% | 실시간 |
| 시스템 가동률 | 99% 이상 | 월간 |

---

## 부록: 용어 정의

| 용어 | 설명 |
|------|------|
| 타수 (Shot) | 금형이 사출한 횟수 |
| 캐비티 (Cavity) | 제품이 성형되는 금형의 오목한 부분 |
| 코어 (Core) | 제품의 내부를 성형하는 금형의 볼록한 부분 |
| 게이트 (Gate) | 용융 수지가 캐비티로 유입되는 입구 |
| 에젝터 (Ejector) | 성형품을 금형에서 밀어내는 장치 |
| 슬라이드 (Slide) | 언더컷 부분을 성형하기 위한 가동 부품 |
| 리프터 (Lifter) | 언더컷을 처리하는 경사진 핀 |
| 파팅라인 (Parting Line) | 금형이 열리는 면 |
| 습합 (Fitting) | 금형의 맞춤 상태 점검 |
| 이형제 (Release Agent) | 제품이 금형에서 쉽게 분리되도록 하는 약품 |
